<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Swift Gate</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="book.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="index.html">Home</a></li><li class="chapter-item affix "><li class="part-title">src</li><li class="chapter-item "><a href="src/SwiftERC20.sol/contract.SwiftERC20.html">SwiftERC20</a></li><li class="chapter-item "><a href="src/SwiftGate.sol/contract.SwiftGate.html">SwiftGate</a></li><li class="chapter-item "><a href="src/TokenFactory.sol/contract.TokenFactory.html">TokenFactory</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Swift Gate</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/0x73696d616f/swift-gate-contracts" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="swiftgate-contracts"><a class="header" href="#swiftgate-contracts">SwiftGate contracts</a></h1>
<h2 id="swift-gate---0xb84f07612f4bfec42e042b6cdd26df496b3d397f"><a class="header" href="#swift-gate---0xb84f07612f4bfec42e042b6cdd26df496b3d397f">Swift Gate - 0xB84f07612F4bfEc42E042b6CDD26df496b3d397f</a></h2>
<p>The swift gate smart contract is responsible for bridging tokens between different blockchains. The governors whitelist tokens on a certain chain id that can be bridged to other chain ids. </p>
<p>Users call <code>swiftSend()</code> to bridge tokens to other chain and specify if they want the <code>swiftReceive()</code>call on the destination chain to be batched with other users bridged tokens or not. Calling <code>swiftSend()</code> with the <code>isSingle_</code> argument to true will inccur in much bigger gas costs, but instant bridging, whereas setting this flag to false is slower but about 6 times cheaper.</p>
<p>The governors, each running the backend, sign a transaction specifying tokens to be received on the destination chain after users call <code>swiftSend()</code> in the source chain.</p>
<p>Validating 13 signatures is an expensive process and to compensate for this, swift gate leverages batching user deposits so that for a batch of bridged tokens only a message hash has to be signed. For example, for each bridged token, a regular bridge would require 2 transactions, one on the source chain and one on the destination chain, having to validate 13 signatures once. In this case, for 10 deposits, it would require 20 transactions in which the signatures are validated 10 times. However, if the bridged assets are batched, it takes 11 transactions (10 <code>swiftSend()</code> + 1 <code>swiftReceive()</code>) and the signatures are only validate once.</p>
<h2 id="token-factory---0xdbaf1e8f67b63a1da2f9bb0214d6087caa58170d"><a class="header" href="#token-factory---0xdbaf1e8f67b63a1da2f9bb0214d6087caa58170d">Token Factory - 0xDBAF1e8f67B63a1DA2f9bB0214d6087cAA58170D</a></h2>
<p>The token factory creates wrapped tokens for tokens on other blockchains. Its owner is the swift gate, from which governors can create new wrapped tokens. </p>
<p>The tokens are <a href="https://docs.openzeppelin.com/contracts/4.x/api/proxy#Clones">clones</a>, which means that they have a common implementation as <code>SwiftERC20</code>. When a token is created on the token factory, it deploys a proxy which points to the implementation, effectively reducing gas costs significantly for the governors.</p>
<h2 id="swifterc20---0x46972365c218484d1286b6ea08d35bd5aaa935c4"><a class="header" href="#swifterc20---0x46972365c218484d1286b6ea08d35bd5aaa935c4">SwiftERC20 - 0x46972365C218484d1286B6Ea08d35bD5aaa935C4</a></h2>
<p>Implementation of wrapped tokens of the swift gate. Regular ERC20 token that is mintable and burnable by the swift gate. When a token not native to a blockchain is received, the receiver is minted wrapped tokens. When the user wants to bridge back the tokens, these are burned and they get the remote tokens on the original blockchain.</p>
<h2 id="smart-contracts-architecture"><a class="header" href="#smart-contracts-architecture">Smart Contracts Architecture</a></h2>
<p><img src="https://github.com/0x73696d616f/swift-gate-contracts/blob/master/smart-contracts-architecture.png" alt="alt text" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="swifterc20"><a class="header" href="#swifterc20">SwiftERC20</a></h1>
<p><a href="https://github.com/0x73696d616f/swift-gate-contracts/blob/e44fc1d250e677db34697ed8eabbfa8070f84c39/src/SwiftERC20.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
ERC20Upgradeable</p>
<h2 id="state-variables"><a class="header" href="#state-variables">State Variables</a></h2>
<h3 id="_swiftgate"><a class="header" href="#_swiftgate">_swiftGate</a></h3>
<p>address of the swift gate contract</p>
<pre><code class="language-solidity">address internal _swiftGate;
</code></pre>
<h3 id="_remotetoken"><a class="header" href="#_remotetoken">_remoteToken</a></h3>
<p>address of the remote token contract</p>
<pre><code class="language-solidity">address internal _remoteToken;
</code></pre>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="onlyswiftgate"><a class="header" href="#onlyswiftgate">onlySwiftGate</a></h3>
<p>can only be called by swift gate</p>
<pre><code class="language-solidity">modifier onlySwiftGate();
</code></pre>
<h3 id="initialize"><a class="header" href="#initialize">initialize</a></h3>
<p>initialize the contract</p>
<pre><code class="language-solidity">function initialize(string memory name_, string memory symbol_, address swiftGate_, address remoteToken_)
    public
    initializer;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>name_</code></td><td><code>string</code></td><td>name of the wrapped token</td></tr>
<tr><td><code>symbol_</code></td><td><code>string</code></td><td>symbol of the wrapped token</td></tr>
<tr><td><code>swiftGate_</code></td><td><code>address</code></td><td>address of the swift gate contract</td></tr>
<tr><td><code>remoteToken_</code></td><td><code>address</code></td><td>address of the remote token contract</td></tr>
</tbody></table>
</div>
<h3 id="mint"><a class="header" href="#mint">mint</a></h3>
<p>swift gate mints tokens</p>
<pre><code class="language-solidity">function mint(address account_, uint256 amount_) external onlySwiftGate;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>account_</code></td><td><code>address</code></td><td>address to mint tokens to</td></tr>
<tr><td><code>amount_</code></td><td><code>uint256</code></td><td>amount of tokens to mint</td></tr>
</tbody></table>
</div>
<h3 id="burn"><a class="header" href="#burn">burn</a></h3>
<p>swift gate burns tokens</p>
<pre><code class="language-solidity">function burn(address account_, uint256 amount_) external onlySwiftGate;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>account_</code></td><td><code>address</code></td><td>address to burn tokens from</td></tr>
<tr><td><code>amount_</code></td><td><code>uint256</code></td><td>amount of tokens to burn</td></tr>
</tbody></table>
</div>
<h3 id="getswiftgate"><a class="header" href="#getswiftgate">getSwiftGate</a></h3>
<p>returns the address of the swift gate</p>
<pre><code class="language-solidity">function getSwiftGate() external view returns (address);
</code></pre>
<h3 id="getremotetoken"><a class="header" href="#getremotetoken">getRemoteToken</a></h3>
<p>returns the address of the remote token</p>
<pre><code class="language-solidity">function getRemoteToken() external view returns (address);
</code></pre>
<h2 id="errors"><a class="header" href="#errors">Errors</a></h2>
<h3 id="onlyswiftgateerror"><a class="header" href="#onlyswiftgateerror">OnlySwiftGateError</a></h3>
<p>triggered when an address other than the swift gate calls this contract</p>
<pre><code class="language-solidity">error OnlySwiftGateError(address msgSender_);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="swiftgate"><a class="header" href="#swiftgate">SwiftGate</a></h1>
<p><a href="https://github.com/0x73696d616f/swift-gate-contracts/blob/e44fc1d250e677db34697ed8eabbfa8070f84c39/src/SwiftGate.sol">Git Source</a></p>
<h2 id="state-variables-1"><a class="header" href="#state-variables-1">State Variables</a></h2>
<h3 id="_chainid"><a class="header" href="#_chainid">_chainId</a></h3>
<p>chain id of swift gate on this chain</p>
<pre><code class="language-solidity">uint16 internal _chainId;
</code></pre>
<h3 id="_aavev3lendingpool"><a class="header" href="#_aavev3lendingpool">_aaveV3LendingPool</a></h3>
<p>Aave v3 lending pool</p>
<pre><code class="language-solidity">IPool internal _aaveV3LendingPool;
</code></pre>
<h3 id="_aavev3rewardscontroller"><a class="header" href="#_aavev3rewardscontroller">_aaveV3RewardsController</a></h3>
<p>Aave v3 rewards controller</p>
<pre><code class="language-solidity">IRewardsController internal _aaveV3RewardsController;
</code></pre>
<h3 id="_governors"><a class="header" href="#_governors">_governors</a></h3>
<p>Mapping of governor address =&gt; is governor</p>
<pre><code class="language-solidity">mapping(address =&gt; bool) internal _governors;
</code></pre>
<h3 id="_feeofchainid"><a class="header" href="#_feeofchainid">_feeOfChainId</a></h3>
<p>Mapping of chainId =&gt; fee</p>
<pre><code class="language-solidity">mapping(uint256 =&gt; uint256) internal _feeOfChainId;
</code></pre>
<h3 id="_feeifbatchedofchainid"><a class="header" href="#_feeifbatchedofchainid">_feeIfBatchedOfChainId</a></h3>
<p>Mapping of chainId =&gt; fee if batched</p>
<pre><code class="language-solidity">mapping(uint256 =&gt; uint256) internal _feeIfBatchedOfChainId;
</code></pre>
<h3 id="_signedmessages"><a class="header" href="#_signedmessages">_signedMessages</a></h3>
<p>Mapping of chainId =&gt; is chain supported</p>
<pre><code class="language-solidity">mapping(bytes32 =&gt; bool) internal _signedMessages;
</code></pre>
<h3 id="_remotetowrappedtokens"><a class="header" href="#_remotetowrappedtokens">_remoteToWrappedTokens</a></h3>
<p>Mapping of chainId =&gt; destination token =&gt; wrappedToken</p>
<pre><code class="language-solidity">mapping(uint256 =&gt; mapping(address =&gt; address)) internal _remoteToWrappedTokens;
</code></pre>
<h3 id="_wrappedtoremotetokens"><a class="header" href="#_wrappedtoremotetokens">_wrappedToRemoteTokens</a></h3>
<p>Mapping of token to wrapped token</p>
<pre><code class="language-solidity">mapping(address =&gt; address) internal _wrappedToRemoteTokens;
</code></pre>
<h3 id="_dsttokens"><a class="header" href="#_dsttokens">_dstTokens</a></h3>
<p>Mapping of chainId =&gt; local token =&gt; is supported token</p>
<pre><code class="language-solidity">mapping(uint256 =&gt; mapping(address =&gt; bool)) internal _dstTokens;
</code></pre>
<h3 id="_tokenfactory"><a class="header" href="#_tokenfactory">_tokenFactory</a></h3>
<p>Factory for creating wrapped tokens</p>
<pre><code class="language-solidity">TokenFactory internal immutable _tokenFactory;
</code></pre>
<h3 id="_minsignatures"><a class="header" href="#_minsignatures">_minSignatures</a></h3>
<p>Minimum signatures to validate messages</p>
<pre><code class="language-solidity">uint256 internal _minSignatures;
</code></pre>
<h2 id="functions-1"><a class="header" href="#functions-1">Functions</a></h2>
<h3 id="constructor"><a class="header" href="#constructor">constructor</a></h3>
<p>creates the TokenFactory which is owner by this contract - swift gate</p>
<pre><code class="language-solidity">constructor();
</code></pre>
<h3 id="initialize-1"><a class="header" href="#initialize-1">initialize</a></h3>
<p>initializes the swift gate contract</p>
<pre><code class="language-solidity">function initialize(
    uint16 chainId_,
    address aaveV3,
    address aaveV3RewardsController_,
    address[] memory governors_,
    uint256 minSignatures_
) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>chainId_</code></td><td><code>uint16</code></td><td>chain id of the swift gate contract</td></tr>
<tr><td><code>aaveV3</code></td><td><code>address</code></td><td>aave v3 lending pool address</td></tr>
<tr><td><code>aaveV3RewardsController_</code></td><td><code>address</code></td><td>aave v3 rewards controller address</td></tr>
<tr><td><code>governors_</code></td><td><code>address[]</code></td><td>array of governor addresses</td></tr>
<tr><td><code>minSignatures_</code></td><td><code>uint256</code></td><td>minimum number of signatures to validate messages</td></tr>
</tbody></table>
</div>
<h3 id="swiftreceive"><a class="header" href="#swiftreceive">swiftReceive</a></h3>
<p>receives a batch of tokens, mints the wrapped versions and verifies the signatures.</p>
<pre><code class="language-solidity">function swiftReceive(SwReceiveParams[] calldata params_, Signature[] calldata signatures_, bytes32 salt_) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>params_</code></td><td><code>SwReceiveParams[]</code></td><td>struct with the parameters to sned across bridges - includes token, amount, receiver, srcChain, dstChain</td></tr>
<tr><td><code>signatures_</code></td><td><code>Signature[]</code></td><td>array of signatures from the governors (message hash signed by governors )</td></tr>
<tr><td><code>salt_</code></td><td><code>bytes32</code></td><td>salt used to enable signing the same message more than once</td></tr>
</tbody></table>
</div>
<h3 id="swiftsend"><a class="header" href="#swiftsend">swiftSend</a></h3>
<p>sends a token to another chain.</p>
<pre><code class="language-solidity">function swiftSend(address token_, uint256 amount_, address receiver_, uint16 dstChain_, bool isSingle_) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>token_</code></td><td><code>address</code></td><td>the token to send.</td></tr>
<tr><td><code>amount_</code></td><td><code>uint256</code></td><td>the amount of tokens to send.</td></tr>
<tr><td><code>receiver_</code></td><td><code>address</code></td><td>the receiver of the tokens.</td></tr>
<tr><td><code>dstChain_</code></td><td><code>uint16</code></td><td>the destination chain.</td></tr>
<tr><td><code>isSingle_</code></td><td><code>bool</code></td><td>whether the token is to be batched with other tokens to save gas or not.</td></tr>
</tbody></table>
</div>
<h3 id="addwrappedtoken"><a class="header" href="#addwrappedtoken">addWrappedToken</a></h3>
<p>adds a wrapped token to the respective mapping so it can be used across chains</p>
<pre><code class="language-solidity">function addWrappedToken(
    uint16 chainId_,
    address token_,
    string memory name_,
    string memory symbol_,
    Signature[] calldata signatures_,
    bytes32 salt_
) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>chainId_</code></td><td><code>uint16</code></td><td>chain id of the wrapped token</td></tr>
<tr><td><code>token_</code></td><td><code>address</code></td><td>token that is being wrapped</td></tr>
<tr><td><code>name_</code></td><td><code>string</code></td><td>name of the wrapped token</td></tr>
<tr><td><code>symbol_</code></td><td><code>string</code></td><td>symbol of the wrapped token</td></tr>
<tr><td><code>signatures_</code></td><td><code>Signature[]</code></td><td>array of signatures from the governors (message hash signed by governors )</td></tr>
<tr><td><code>salt_</code></td><td><code>bytes32</code></td><td>salt used to enable signing the same message more than once</td></tr>
</tbody></table>
</div>
<h3 id="adddsttoken"><a class="header" href="#adddsttoken">addDstToken</a></h3>
<p>Adds a token to the dstTokens mapping (verified with the signatures). Signals that a token can be bridged to another chain</p>
<pre><code class="language-solidity">function addDstToken(uint16 chainId_, address token_, Signature[] calldata signatures_, bytes32 salt_) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>chainId_</code></td><td><code>uint16</code></td><td>chain id of the token</td></tr>
<tr><td><code>token_</code></td><td><code>address</code></td><td>token that is being added</td></tr>
<tr><td><code>signatures_</code></td><td><code>Signature[]</code></td><td>array of signatures from the governors (message hash signed by governors )</td></tr>
<tr><td><code>salt_</code></td><td><code>bytes32</code></td><td>salt used to enable signing the same message more than once</td></tr>
</tbody></table>
</div>
<h3 id="deposittoaavev3"><a class="header" href="#deposittoaavev3">depositToAaveV3</a></h3>
<p>deposits a given token in the aave lending pool</p>
<pre><code class="language-solidity">function depositToAaveV3(address token_, uint256 amount_, Signature[] calldata signatures_, bytes32 salt_) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>token_</code></td><td><code>address</code></td><td>token to be deposited</td></tr>
<tr><td><code>amount_</code></td><td><code>uint256</code></td><td>amount to be deposited</td></tr>
<tr><td><code>signatures_</code></td><td><code>Signature[]</code></td><td>array of signatures from the governors (message hash signed by governors )</td></tr>
<tr><td><code>salt_</code></td><td><code>bytes32</code></td><td>salt used to enable signing the same message more than once</td></tr>
</tbody></table>
</div>
<h3 id="withdrawfromaavev3"><a class="header" href="#withdrawfromaavev3">withdrawFromAaveV3</a></h3>
<p>withdraws tokens and rewards from aave to claim the yield for the governors</p>
<pre><code class="language-solidity">function withdrawFromAaveV3(
    address token_,
    address aToken_,
    uint256 amount_,
    address receiver_,
    Signature[] calldata signatures_,
    bytes32 salt_
) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>token_</code></td><td><code>address</code></td><td>token to be withdrawn</td></tr>
<tr><td><code>aToken_</code></td><td><code>address</code></td><td>corresponding aave token. Required for the rewards controller</td></tr>
<tr><td><code>amount_</code></td><td><code>uint256</code></td><td>amount to be withdrawn</td></tr>
<tr><td><code>receiver_</code></td><td><code>address</code></td><td>address to receive the tokens</td></tr>
<tr><td><code>signatures_</code></td><td><code>Signature[]</code></td><td>array of signatures from the governors (message hash signed by governors )</td></tr>
<tr><td><code>salt_</code></td><td><code>bytes32</code></td><td>salt used to enable signing the same message more than once</td></tr>
</tbody></table>
</div>
<h3 id="setfeeofchainid"><a class="header" href="#setfeeofchainid">setFeeOfChainId</a></h3>
<p>sets the fee for a given chain id</p>
<pre><code class="language-solidity">function setFeeOfChainId(uint16 chainId_, uint256 fee_, Signature[] calldata signatures_, bytes32 salt_) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>chainId_</code></td><td><code>uint16</code></td><td>chain id to set the fee for</td></tr>
<tr><td><code>fee_</code></td><td><code>uint256</code></td><td>fee to be set</td></tr>
<tr><td><code>signatures_</code></td><td><code>Signature[]</code></td><td>array of signatures from the governors (message hash signed by governors )</td></tr>
<tr><td><code>salt_</code></td><td><code>bytes32</code></td><td>salt used to enable signing the same message more than once</td></tr>
</tbody></table>
</div>
<h3 id="setfeeifbatchedofchainid"><a class="header" href="#setfeeifbatchedofchainid">setFeeIfBatchedOfChainId</a></h3>
<p>sets the fee if the swiftSend call is batched for a given chain id. Much cheaper than single fee</p>
<pre><code class="language-solidity">function setFeeIfBatchedOfChainId(
    uint16 chainId_,
    uint256 feeIfBatched_,
    Signature[] calldata signatures_,
    bytes32 salt_
) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>chainId_</code></td><td><code>uint16</code></td><td>chain id to set the fee for</td></tr>
<tr><td><code>feeIfBatched_</code></td><td><code>uint256</code></td><td>fee to be set</td></tr>
<tr><td><code>signatures_</code></td><td><code>Signature[]</code></td><td>array of signatures from the governors (message hash signed by governors )</td></tr>
<tr><td><code>salt_</code></td><td><code>bytes32</code></td><td>salt used to enable signing the same message more than once</td></tr>
</tbody></table>
</div>
<h3 id="setgovernors"><a class="header" href="#setgovernors">setGovernors</a></h3>
<p>sets the governors of the swift gate. Useful if governors are not working well and need to be replaced</p>
<pre><code class="language-solidity">function setGovernors(
    address[] calldata governors_,
    bool[] calldata set_,
    Signature[] calldata signatures_,
    bytes32 salt_
) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>governors_</code></td><td><code>address[]</code></td><td>array of governors to be set</td></tr>
<tr><td><code>set_</code></td><td><code>bool[]</code></td><td>array of booleans to set the governors to true or false</td></tr>
<tr><td><code>signatures_</code></td><td><code>Signature[]</code></td><td>array of signatures from the governors (message hash signed by governors )</td></tr>
<tr><td><code>salt_</code></td><td><code>bytes32</code></td><td>salt used to enable signing the same message more than once</td></tr>
</tbody></table>
</div>
<h3 id="setminsignatures"><a class="header" href="#setminsignatures">setMinSignatures</a></h3>
<p>sets the min signatures required to execute calls to the swift gate</p>
<pre><code class="language-solidity">function setMinSignatures(uint256 minSignatures_, Signature[] calldata signatures_, bytes32 salt_) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>minSignatures_</code></td><td><code>uint256</code></td><td>min signatures to be set</td></tr>
<tr><td><code>signatures_</code></td><td><code>Signature[]</code></td><td>array of signatures from the governors (message hash signed by governors )</td></tr>
<tr><td><code>salt_</code></td><td><code>bytes32</code></td><td>salt used to enable signing the same message more than once</td></tr>
</tbody></table>
</div>
<h3 id="getfeeofchainid"><a class="header" href="#getfeeofchainid">getFeeOfChainId</a></h3>
<p>gets the single swift send fee of to a given chain id</p>
<pre><code class="language-solidity">function getFeeOfChainId(uint16 chainId_) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>chainId_</code></td><td><code>uint16</code></td><td>chain id to get the fee for</td></tr>
</tbody></table>
</div>
<h3 id="getfeeifbatchedofchainid"><a class="header" href="#getfeeifbatchedofchainid">getFeeIfBatchedOfChainId</a></h3>
<p>gets the batched swift send fee of to a given chain id</p>
<pre><code class="language-solidity">function getFeeIfBatchedOfChainId(uint16 chainId_) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>chainId_</code></td><td><code>uint16</code></td><td>chain id to get the fee for</td></tr>
</tbody></table>
</div>
<h3 id="getchainid"><a class="header" href="#getchainid">getChainId</a></h3>
<p>gets the chain id of the swift gate</p>
<pre><code class="language-solidity">function getChainId() external view returns (uint256);
</code></pre>
<h3 id="isgovernor"><a class="header" href="#isgovernor">isGovernor</a></h3>
<p>checks if an account is a governor</p>
<pre><code class="language-solidity">function isGovernor(address account_) external view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>account_</code></td><td><code>address</code></td><td>account to check</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>true if the account is a governor, false otherwise</td></tr>
</tbody></table>
</div>
<h3 id="getwrappedtoken"><a class="header" href="#getwrappedtoken">getWrappedToken</a></h3>
<p>gets the wrapped token of a given chain id and token address</p>
<pre><code class="language-solidity">function getWrappedToken(uint16 chainId_, address token_) external view returns (address);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>chainId_</code></td><td><code>uint16</code></td><td>chain id to get the wrapped token for</td></tr>
<tr><td><code>token_</code></td><td><code>address</code></td><td>token to get the wrapped token for</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>wrapped token address</td></tr>
</tbody></table>
</div>
<h3 id="gettokenfactory"><a class="header" href="#gettokenfactory">getTokenFactory</a></h3>
<p>gets the token factory address that creates the wrapped tokens</p>
<pre><code class="language-solidity">function getTokenFactory() external view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>token factory address</td></tr>
</tbody></table>
</div>
<h3 id="getremotetokenof"><a class="header" href="#getremotetokenof">getRemoteTokenOf</a></h3>
<p>gets the remote token of a given wrapped token address</p>
<pre><code class="language-solidity">function getRemoteTokenOf(address wrappedToken_) external view returns (address);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>wrappedToken_</code></td><td><code>address</code></td><td>wrapped token to get the remote token for</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>remote token address</td></tr>
</tbody></table>
</div>
<h3 id="isdsttoken"><a class="header" href="#isdsttoken">isDstToken</a></h3>
<p>checks if a token is allowed to be bridged to a destination chain id</p>
<pre><code class="language-solidity">function isDstToken(uint16 chainId_, address token_) external view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>chainId_</code></td><td><code>uint16</code></td><td>chain id to check</td></tr>
<tr><td><code>token_</code></td><td><code>address</code></td><td>token to check</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>true if the token is allowed to be bridged, false otherwise</td></tr>
</tbody></table>
</div>
<h3 id="getminsignatures"><a class="header" href="#getminsignatures">getMinSignatures</a></h3>
<p>gets the min signatures required to execute calls to the swift gate</p>
<pre><code class="language-solidity">function getMinSignatures() external view returns (uint256);
</code></pre>
<h3 id="getaavev3lendingpool"><a class="header" href="#getaavev3lendingpool">getAaveV3LendingPool</a></h3>
<p>gets the aave v3 lending pool address</p>
<pre><code class="language-solidity">function getAaveV3LendingPool() external view returns (address);
</code></pre>
<h3 id="_verifysignatures"><a class="header" href="#_verifysignatures">_verifySignatures</a></h3>
<pre><code class="language-solidity">function _verifySignatures(bytes32 messageHash_, Signature[] calldata signatures_) internal;
</code></pre>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<h3 id="swiftsend-1"><a class="header" href="#swiftsend-1">SwiftSend</a></h3>
<p>emitted when an account calls swiftSend and bridges to the destination chain</p>
<pre><code class="language-solidity">event SwiftSend(address token, address remoteToken_, uint256 amount, address receiver, uint16 dstChain, bool isSingle);
</code></pre>
<h2 id="errors-1"><a class="header" href="#errors-1">Errors</a></h2>
<h3 id="lengthmismatcherror"><a class="header" href="#lengthmismatcherror">LengthMismatchError</a></h3>
<p>triggered when the lengths of the array arguments don't match</p>
<pre><code class="language-solidity">error LengthMismatchError();
</code></pre>
<h3 id="notenoughsignatureserror"><a class="header" href="#notenoughsignatureserror">NotEnoughSignaturesError</a></h3>
<p>triggered when the number of signatures is less than the minimum</p>
<pre><code class="language-solidity">error NotEnoughSignaturesError();
</code></pre>
<h3 id="invalidsignatureerror"><a class="header" href="#invalidsignatureerror">InvalidSignatureError</a></h3>
<p>triggered when the signature is invalid</p>
<pre><code class="language-solidity">error InvalidSignatureError();
</code></pre>
<h3 id="wrontdstchainerror"><a class="header" href="#wrontdstchainerror">WrontDstChainError</a></h3>
<pre><code class="language-solidity">error WrontDstChainError(uint256 chainId);
</code></pre>
<h3 id="unsupportedtokenerror"><a class="header" href="#unsupportedtokenerror">UnsupportedTokenError</a></h3>
<p>triggered when the token is not supported on a certain destination chain</p>
<pre><code class="language-solidity">error UnsupportedTokenError(uint16 chainId, address token);
</code></pre>
<h3 id="zeroaddresserror"><a class="header" href="#zeroaddresserror">ZeroAddressError</a></h3>
<p>triggered on a zero address argument</p>
<pre><code class="language-solidity">error ZeroAddressError();
</code></pre>
<h3 id="zeroamounterror"><a class="header" href="#zeroamounterror">ZeroAmountError</a></h3>
<p>triggered when the amount is zero</p>
<pre><code class="language-solidity">error ZeroAmountError();
</code></pre>
<h3 id="chainidalreadyseterror"><a class="header" href="#chainidalreadyseterror">ChainIdAlreadySetError</a></h3>
<p>triggered when the chain id is already set. Prevents reinitialization</p>
<pre><code class="language-solidity">error ChainIdAlreadySetError();
</code></pre>
<h3 id="duplicatesignatureerror"><a class="header" href="#duplicatesignatureerror">DuplicateSignatureError</a></h3>
<p>triggered when the signature is a duplicate. Prevents message replay</p>
<pre><code class="language-solidity">error DuplicateSignatureError();
</code></pre>
<h2 id="structs"><a class="header" href="#structs">Structs</a></h2>
<h3 id="signature"><a class="header" href="#signature">Signature</a></h3>
<p>Struct to hold signature data</p>
<pre><code class="language-solidity">struct Signature {
    uint8 v;
    bytes32 r;
    bytes32 s;
}
</code></pre>
<h3 id="swreceiveparams"><a class="header" href="#swreceiveparams">SwReceiveParams</a></h3>
<p>Struct to hold swift receive parameters</p>
<pre><code class="language-solidity">struct SwReceiveParams {
    address token;
    uint256 amount;
    address receiver;
    uint16 srcChain;
    uint16 dstChain;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tokenfactory"><a class="header" href="#tokenfactory">TokenFactory</a></h1>
<p><a href="https://github.com/0x73696d616f/swift-gate-contracts/blob/e44fc1d250e677db34697ed8eabbfa8070f84c39/src/TokenFactory.sol">Git Source</a></p>
<h2 id="state-variables-2"><a class="header" href="#state-variables-2">State Variables</a></h2>
<h3 id="_implementation"><a class="header" href="#_implementation">_implementation</a></h3>
<p>implementation of the swiftGate wrapped tokens</p>
<pre><code class="language-solidity">address internal immutable _implementation;
</code></pre>
<h3 id="_swiftgate-1"><a class="header" href="#_swiftgate-1">_swiftGate</a></h3>
<p>address of the swift gate contract</p>
<pre><code class="language-solidity">address internal immutable _swiftGate;
</code></pre>
<h2 id="functions-2"><a class="header" href="#functions-2">Functions</a></h2>
<h3 id="onlyswiftgate-1"><a class="header" href="#onlyswiftgate-1">onlySwiftGate</a></h3>
<p>can only be called by swift gate</p>
<pre><code class="language-solidity">modifier onlySwiftGate();
</code></pre>
<h3 id="constructor-1"><a class="header" href="#constructor-1">constructor</a></h3>
<p>the swift gate creates the token factory in its constructor.</p>
<pre><code class="language-solidity">constructor();
</code></pre>
<h3 id="create"><a class="header" href="#create">create</a></h3>
<p>create a new wrapped token. Called by the swift gate</p>
<pre><code class="language-solidity">function create(string memory name_, string memory symbol_, address remoteToken_)
    external
    onlySwiftGate
    returns (address proxy_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>name_</code></td><td><code>string</code></td><td>name of the wrapped token</td></tr>
<tr><td><code>symbol_</code></td><td><code>string</code></td><td>symbol of the wrapped token</td></tr>
<tr><td><code>remoteToken_</code></td><td><code>address</code></td><td>address of the remote token contract</td></tr>
</tbody></table>
</div>
<h3 id="getimplementation"><a class="header" href="#getimplementation">getImplementation</a></h3>
<p>returns the address of the implementation of the wrapped tokens</p>
<pre><code class="language-solidity">function getImplementation() external view returns (address);
</code></pre>
<h2 id="errors-2"><a class="header" href="#errors-2">Errors</a></h2>
<h3 id="onlyswiftgateerror-1"><a class="header" href="#onlyswiftgateerror-1">OnlySwiftGateError</a></h3>
<p>triggered when an address other than the swift gate calls this contract</p>
<pre><code class="language-solidity">error OnlySwiftGateError(address msgSender_);
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="solidity.min.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
